{"ast":null,"code":"import _defineProperty from\"/Users/Justin/go/src/FlipReset/project/flip-reset/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/Justin/go/src/FlipReset/project/flip-reset/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/Justin/go/src/FlipReset/project/flip-reset/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Justin/go/src/FlipReset/project/flip-reset/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/Justin/go/src/FlipReset/project/flip-reset/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/Justin/go/src/FlipReset/project/flip-reset/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import\"./register.css\";import React,{Component}from'react';import{Link,withRouter,Redirect}from'react-router-dom';import{compose}from'recompose';import{withFirebase}from'../components/Firebase';var SignUpPage=function SignUpPage(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SignUpForm,null));};var INITIAL_STATE={username:'',email:'',passwordOne:'',passwordTwo:'',isAdmin:false,error:null};var ERROR_CODE_ACCOUNT_EXISTS='auth/email-already-in-use';var ERROR_MSG_ACCOUNT_EXISTS=\"\\n  An account with this E-Mail address already exists.\\n  Try to login with this account instead. If you think the\\n  account is already used from one of the social logins, try\\n  to sign in with one of them. Afterward, associate your accounts\\n  on your personal account page.\\n\";var SignUpFormBase=/*#__PURE__*/function(_Component){_inherits(SignUpFormBase,_Component);var _super=_createSuper(SignUpFormBase);function SignUpFormBase(props){var _this;_classCallCheck(this,SignUpFormBase);_this=_super.call(this,props);_this.onSubmit=function(event){event.preventDefault();var _this$state=_this.state,username=_this$state.username,email=_this$state.email,passwordOne=_this$state.passwordOne,isAdmin=_this$state.isAdmin;var roles={};_this.props.firebase.doCreateUserWithEmailAndPassword(email,passwordOne).then(function(authUser){// Create a user in your Firebase realtime database\nreturn _this.props.firebase.user(authUser.user.uid).set({username:username,email:email});}).then(function(){return _this.props.firebase.doSendEmailVerification();}).then(function(){_this.setState(_objectSpread({},INITIAL_STATE));_this.props.history.push(/*#__PURE__*/React.createElement(Redirect,{to:\"/home\"}));}).catch(function(error){if(error.code===ERROR_CODE_ACCOUNT_EXISTS){error.message=ERROR_MSG_ACCOUNT_EXISTS;}_this.setState({error:error});});};_this.onChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.onChangeCheckbox=function(event){_this.setState(_defineProperty({},event.target.name,event.target.checked));};_this.state=_objectSpread({},INITIAL_STATE);return _this;}_createClass(SignUpFormBase,[{key:\"render\",value:function render(){var _this$state2=this.state,username=_this$state2.username,email=_this$state2.email,passwordOne=_this$state2.passwordOne,passwordTwo=_this$state2.passwordTwo,error=_this$state2.error;var isInvalid=passwordOne!==passwordTwo||passwordOne===''||email===''||username==='';return/*#__PURE__*/React.createElement(\"div\",{className:\"Register\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary submit-button-reg\"},\"Link to Sign In \")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"entry\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"title-label\"},\"FlipReset\")),/*#__PURE__*/React.createElement(\"input\",{name:\"username\",value:username,onChange:this.onChange,type:\"text\",placeholder:\"Full Name\"}),/*#__PURE__*/React.createElement(\"input\",{name:\"email\",value:email,onChange:this.onChange,type:\"text\",placeholder:\"Email Address\"}),/*#__PURE__*/React.createElement(\"input\",{name:\"passwordOne\",value:passwordOne,onChange:this.onChange,type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/React.createElement(\"input\",{name:\"passwordTwo\",value:passwordTwo,onChange:this.onChange,type:\"password\",placeholder:\"Confirm Password\"}),/*#__PURE__*/React.createElement(\"button\",{disabled:isInvalid,type:\"submit\"},\"Sign Up\"),error&&/*#__PURE__*/React.createElement(\"p\",null,error.message))));}}]);return SignUpFormBase;}(Component);var SignUpLink=function SignUpLink(){return/*#__PURE__*/React.createElement(\"p\",null,\"Don't have an account? \",/*#__PURE__*/React.createElement(Link,{to:\"/register\"},\"Sign Up\"));};var SignUpForm=compose(withRouter,withFirebase)(SignUpFormBase);export default SignUpPage;export{SignUpForm,SignUpLink};","map":{"version":3,"sources":["/Users/Justin/go/src/FlipReset/project/flip-reset/src/register/register.js"],"names":["React","Component","Link","withRouter","Redirect","compose","withFirebase","SignUpPage","INITIAL_STATE","username","email","passwordOne","passwordTwo","isAdmin","error","ERROR_CODE_ACCOUNT_EXISTS","ERROR_MSG_ACCOUNT_EXISTS","SignUpFormBase","props","onSubmit","event","preventDefault","state","roles","firebase","doCreateUserWithEmailAndPassword","then","authUser","user","uid","set","doSendEmailVerification","setState","history","push","catch","code","message","onChange","target","name","value","onChangeCheckbox","checked","isInvalid","SignUpLink","SignUpForm"],"mappings":"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","sourcesContent":["import \"./register.css\";\nimport React, { Component } from 'react';\nimport { Link, withRouter, Redirect } from 'react-router-dom';\nimport { compose } from 'recompose';\n\n\n\nimport { withFirebase } from '../components/Firebase';\n\nconst SignUpPage = () => (\n  <div>\n    <SignUpForm />\n  </div>\n);\n\nconst INITIAL_STATE = {\n  username: '',\n  email: '',\n  passwordOne: '',\n  passwordTwo: '',\n  isAdmin: false,\n  error: null,\n};\n\nconst ERROR_CODE_ACCOUNT_EXISTS = 'auth/email-already-in-use';\n\nconst ERROR_MSG_ACCOUNT_EXISTS = `\n  An account with this E-Mail address already exists.\n  Try to login with this account instead. If you think the\n  account is already used from one of the social logins, try\n  to sign in with one of them. Afterward, associate your accounts\n  on your personal account page.\n`;\n\nclass SignUpFormBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { ...INITIAL_STATE };\n  }\n\n  onSubmit = event => {\n    event.preventDefault();\n\n    const { username, email, passwordOne, isAdmin } = this.state;\n    const roles = {};\n\n    this.props.firebase\n      .doCreateUserWithEmailAndPassword(email, passwordOne)\n      .then(authUser => {\n        // Create a user in your Firebase realtime database\n        return this.props.firebase.user(authUser.user.uid).set({\n          username,\n          email,\n        });\n      })\n      .then(() => {\n        return this.props.firebase.doSendEmailVerification();\n      })\n      .then(() => {\n        this.setState({ ...INITIAL_STATE });\n        this.props.history.push(<Redirect to=\"/home\"/>);\n      })\n      .catch(error => {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        this.setState({ error });\n      });\n  };\n\n  onChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  onChangeCheckbox = event => {\n    this.setState({ [event.target.name]: event.target.checked });\n  };\n\n  render() {\n    const {\n      username,\n      email,\n      passwordOne,\n      passwordTwo,\n      error,\n    } = this.state;\n\n    const isInvalid =\n      passwordOne !== passwordTwo ||\n      passwordOne === '' ||\n      email === '' ||\n      username === '';\n\n    return (\n      \n        <div className=\"Register\">\n        <Link to=\"/\">\n      <button className=\"btn btn-primary submit-button-reg\">Link to Sign In </button>\n       </Link>\n      <form onSubmit={this.onSubmit}>\n      <div className=\"entry\">\n        <div>\n            <label className=\"title-label\">FlipReset</label>\n        </div>\n        <input\n          name=\"username\"\n          value={username}\n          onChange={this.onChange}\n          type=\"text\"\n          placeholder=\"Full Name\"\n        />\n        <input\n          name=\"email\"\n          value={email}\n          onChange={this.onChange}\n          type=\"text\"\n          placeholder=\"Email Address\"\n        />\n        <input\n          name=\"passwordOne\"\n          value={passwordOne}\n          onChange={this.onChange}\n          type=\"password\"\n          placeholder=\"Password\"\n        />\n        <input\n          name=\"passwordTwo\"\n          value={passwordTwo}\n          onChange={this.onChange}\n          type=\"password\"\n          placeholder=\"Confirm Password\"\n        />\n        <button disabled={isInvalid} type=\"submit\">\n          Sign Up\n        </button>\n\n        {error && <p>{error.message}</p>}\n        </div>\n      </form>\n      </div>\n    );\n  }\n}\n\nconst SignUpLink = () => (\n  <p>\n    Don't have an account? <Link to={\"/register\"}>Sign Up</Link>\n  </p>\n);\n\nconst SignUpForm = compose(\n  withRouter,\n  withFirebase,\n)(SignUpFormBase);\n\nexport default SignUpPage;\n\nexport { SignUpForm, SignUpLink };"]},"metadata":{},"sourceType":"module"}